{"version":3,"sources":["node_modules/browser-pack/_prelude.js","index.js","src/main.ts"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","extendStatics","__extends","this","d","b","Object","setPrototypeOf","__proto__","Array","prototype","hasOwnProperty","TypeError","String","__","constructor","create","defineProperty","value","matches","SchemaError","_super","message","_this","name","typeMapKeys","validateSchema","schema","includes","isArray","forEach","shouldValidateSchema","matchesAtomic","every","v","matchArray"],"mappings":"CAAA,SAAAA,EAAAC,EAAAC,EAAAC,GAAA,SAAAC,EAAAC,EAAAC,GAAA,IAAAJ,EAAAG,GAAA,CAAA,IAAAJ,EAAAI,GAAA,CAAA,IAAAE,EAAA,mBAAAC,SAAAA,QAAA,IAAAF,GAAAC,EAAA,OAAAA,EAAAF,GAAA,GAAA,GAAAI,EAAA,OAAAA,EAAAJ,GAAA,GAAA,IAAAK,EAAA,IAAAC,MAAA,uBAAAN,EAAA,KAAA,MAAAK,EAAAE,KAAA,mBAAAF,CAAA,CAAA,IAAAG,EAAAX,EAAAG,GAAA,CAAAS,QAAA,CAAA,GAAAb,EAAAI,GAAA,GAAAU,KAAAF,EAAAC,SAAA,SAAAd,GAAA,OAAAI,EAAAH,EAAAI,GAAA,GAAAL,IAAAA,EAAA,GAAAa,EAAAA,EAAAC,QAAAd,EAAAC,EAAAC,EAAAC,EAAA,CAAA,OAAAD,EAAAG,GAAAS,OAAA,CAAA,IAAA,IAAAL,EAAA,mBAAAD,SAAAA,QAAAH,EAAA,EAAAA,EAAAF,EAAAa,OAAAX,IAAAD,EAAAD,EAAAE,IAAA,OAAAD,CAAA,CAAA,CAAA,CAAA,EAAA,CAAA,SAAAI,EAAAS,EAAAH,GCCA,aACA,IACQI,EADJC,EAAaC,MAAQA,KAAKD,YACtBD,EAAgB,SAAUG,EAAGC,GAI7B,OAHAJ,EAAgBK,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,CAAG,GAC1E,SAAUD,EAAGC,GAAK,IAAK,IAAIT,KAAKS,EAAOC,OAAOI,UAAUC,eAAeb,KAAKO,EAAGT,KAAIQ,EAAER,GAAKS,EAAET,GAAI,EAC7FK,EAAcG,EAAGC,EAC5B,EACO,SAAUD,EAAGC,GAChB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIO,UAAU,uBAAyBC,OAAOR,GAAK,iCAE7D,SAASS,IAAOX,KAAKY,YAAcX,CAAG,CADtCH,EAAcG,EAAGC,GAEjBD,EAAEM,UAAkB,OAANL,EAAaC,OAAOU,OAAOX,IAAMS,EAAGJ,UAAYL,EAAEK,UAAW,IAAII,EACnF,GAEJR,OAAOW,eAAepB,EAAS,aAAc,CAAEqB,OAAO,IACtDrB,EAAQsB,aAAU,EClBlB,IAAAC,EAAA,SAAAC,GACI,SAAAD,EAAaE,GAAb,IAAAC,EACIF,EAAAvB,KAAAK,KAAMmB,IAAQnB,KDsBd,OCrBAoB,EAAKC,KAAO,cDqBLD,CCpBX,CACJ,OAL0BrB,EAAAkB,EAAAC,GAK1BD,CAAA,CALA,CAA0B1B,OAiBpB+B,EAAc,CAChB,SACA,SACA,UACA,SACA,WACA,YACA,MACA,UAgCJ,SAASC,EAAgBC,GACrB,GAAsB,iBAAXA,GACP,IAAKF,EAAYG,SAASD,GACtB,MAAM,IAAIP,EAAY,sBAGvB,KAAIX,MAAMoB,QAAQF,GAIrB,MAAM,IAAIP,EAAY,kBAHtBO,EAAOG,QAAQJ,EDJnB,CCSJ,CAEA,SAAgBP,EACZhC,EACAwC,EACAI,GAMA,YANA,IAAAA,IAAAA,GAAA,GAEIA,GACAL,EAAeC,GAGG,iBAAXA,EApCf,SAAwBxC,EAAYwC,GAChC,MAAe,QAAXA,UAGUxC,IAAMwC,CACxB,CAgCeK,CAAc7C,EAAGwC,KAEjBlB,MAAMoB,QAAQF,IAhC7B,SAAuCxC,EAAYwC,GAC/C,OAAOlB,MAAMoB,QAAQ1C,IACdA,EAAEY,SAAW4B,EAAO5B,QACpBZ,EAAE8C,OAAM,SAACC,EAAG9C,GAAM,OAAA+B,EAAQe,EAAGP,EAAOvC,IAAI,EAAtB,GAC7B,CA6Be+C,CAAWhD,EAAGwC,EAK7B,CAlBA9B,EAAAsB,QAAAA,CDQA,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",null,"class SchemaError extends Error {\n    constructor (message: string) {\n        super(message);\n        this.name = 'SchemaError';\n    }\n}\n\ntype TypeMap = {\n    string: string;\n    number: number;\n    boolean: boolean;\n    object: object;\n    function: Function;\n    undefined: undefined;\n    any: any\n    symbol: symbol;\n}\nconst typeMapKeys = [\n    'string',\n    'number',\n    'boolean',\n    'object',\n    'function',\n    'undefined',\n    'any',\n    'symbol'\n];\n\ntype Schema = keyof TypeMap\n    | Schema[]\n    | { [key: string]: Schema };\n\ntype MatchResult <T> =\n    T extends keyof TypeMap\n        ? TypeMap[T]\n        :\n    T extends Schema[]\n        ? MatchResult<T[number]>[]\n        :\n    T extends { [ key: string ]: Schema }\n        ? { [K in keyof T]: MatchResult<T[K]> }\n        :\n    never;\n\nfunction matchesAtomic (o: unknown, schema: keyof TypeMap): boolean {\n    if (schema === 'any') {\n        return true;\n    }\n    return typeof o === schema;\n}\n\nfunction matchArray<T extends Schema> (o: unknown, schema: T[]): o is MatchResult<T> {\n    return Array.isArray(o)\n        && o.length === schema.length\n        && o.every((v, i) => matches(v, schema[i], false));\n}\n\nfunction validateSchema (schema: unknown): asserts schema is Schema {\n    if (typeof schema === 'string') {\n        if (!typeMapKeys.includes(schema)) {\n            throw new SchemaError('Invalid schema');\n        }\n\n    } else if (Array.isArray(schema)) {\n        schema.forEach(validateSchema);\n\n    } else {\n        throw new SchemaError('Invalid schema');\n    }\n}\n\nexport function matches<T extends Schema> (\n    o: unknown,\n    schema: T,\n    shouldValidateSchema = true\n): o is MatchResult<T> {\n    if (shouldValidateSchema) {\n        validateSchema(schema);\n    }\n\n    if (typeof schema === 'string') {\n        return matchesAtomic(o, schema);\n\n    } else if (Array.isArray(schema)) {\n        return matchArray(o, schema);\n\n    } else {\n        return false;\n    }\n}"]}